<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì£¼ì›ì˜ ë§ˆìŒ RNG ê¸°ë¶€ê²Œì„</title>
  <style>
    * { box-sizing: border-box; }
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 30px;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      color: #ffd700;
      text-shadow: 2px 2px #000;
    }

    .section { margin: 40px 0; }

    button {
      padding: 12px 24px;
      margin: 5px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      transition: transform 0.2s, background-color 0.3s;
    }
    button:hover {
      transform: scale(1.05);
    }
    .donate { background-color: #ffcc00; color: black; }
    .gacha { background-color: #7b68ee; color: white; }
    .auto { background-color: #444; color: white; }

    .aura-box {
      margin-top: 15px;
      font-size: 20px;
      min-height: 30px;
      animation: popUp 0.5s ease;
    }
    @keyframes popUp {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .cutscene {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: radial-gradient(circle, rgba(255,255,255,0.1), rgba(0,0,0,0.9));
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      z-index: 9999;
      display: none;
      animation: flashIn 0.8s ease;
    }
    @keyframes flashIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .storage {
      margin-top: 30px;
      padding: 15px;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    .storage h3 {
      margin-bottom: 10px;
    }
    .aura-item {
      cursor: pointer;
      margin: 0 5px;
    }

    .active-aura {
      margin-top: 20px;
      font-size: 18px;
      color: #00ffff;
    }

    .aura-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 5000;
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      opacity: 0.15;
    }
  </style>
</head>
<body>
  <h1>ğŸŒŸ ì£¼ì›ì˜ RNG ê¸°ë¶€ê²Œì„ ğŸŒŸ</h1>

  <div class="section">
    <button class="donate" onclick="donate()">ê¸°ë¶€í•˜ê¸° +1ì›</button>
    <div>ì´ ê¸°ë¶€ ê¸ˆì•¡: <span id="money">0</span>ì›</div>
  </div>

  <div class="section">
    <button class="gacha" onclick="drawAura()">ğŸ² ì•„ìš°ë¼ ë½‘ê¸°</button>
    <button class="gacha" onclick="drawAura10()">ğŸ” 10íšŒ ë½‘ê¸°</button>
    <button class="auto" onclick="toggleAuto()">âš™ï¸ ìë™ ë½‘ê¸°: <span id="autoState">OFF</span></button>
    <div class="aura-box" id="auraResult"></div>
  </div>

  <div class="storage">
    <h3>ğŸ“¦ ë‚´ ì•„ìš°ë¼ ë³´ê´€í•¨ (í´ë¦­ ì‹œ ì°©ìš©)</h3>
    <div id="auraStorage">ì—†ìŒ</div>
    <div class="active-aura" id="equippedAura">ğŸ§¿ ì°©ìš© ì¤‘ì¸ ì•„ìš°ë¼: ì—†ìŒ</div>
  </div>

  <div class="cutscene" id="cutscene">âœ¨ ì „ì„¤ ì•„ìš°ë¼ íšë“!! âœ¨</div>
  <div class="aura-effect" id="auraEffect"></div>

  <script>
    let money = 0;
    let auto = false;
    let autoInterval;
    let luckBonus = 0;
    let equipped = null;
    const result = document.getElementById('auraResult');
    const storage = document.getElementById('auraStorage');
    const cutscene = document.getElementById('cutscene');
    const equippedAura = document.getElementById('equippedAura');
    const auraEffect = document.getElementById('auraEffect');

    const auras = [
      { name: "íë¦¿í•œ ì•„ìš°ë¼", rarity: "ì¼ë°˜", chance: 50, color: "gray" },
      { name: "ë°˜ì§ì´ëŠ” ì•„ìš°ë¼", rarity: "ì¼ë°˜", chance: 20, color: "silver" },
      { name: "ë¶ˆê½ƒ ì•„ìš°ë¼", rarity: "í¬ê·€", chance: 10, color: "orange", cutscene: true, effect: "ğŸ”¥" },
      { name: "ì–¼ìŒ ì•„ìš°ë¼", rarity: "í¬ê·€", chance: 7, color: "skyblue", cutscene: true, effect: "â„ï¸" },
      { name: "ì²œë‘¥ ì•„ìš°ë¼", rarity: "ì—í”½", chance: 5, color: "violet", cutscene: true, effect: "âš¡" },
      { name: "ë³„ë¹› ì•„ìš°ë¼", rarity: "ì „ì„¤", chance: 3, color: "gold", cutscene: true, effect: "âœ¨" },
      { name: "ë¬´í•œ ì•„ìš°ë¼", rarity: "ì´ˆì›”", chance: 0.8, color: "deepskyblue", cutscene: true, effect: "â™¾ï¸" },
      { name: "ì°½ì¡°ì‹ ì˜ ì•„ìš°ë¼", rarity: "ì‹ í™”", chance: 0.2, color: "white", cutscene: true, effect: "ğŸŒ€" },
    ];

    let myAuras = [];

    function donate() {
      money++;
      document.getElementById('money').textContent = money;
    }

    function drawAura() {
      const roll = Math.random() * 100;
      let cumulative = 0;
      for (const aura of auras) {
        cumulative += aura.chance + luckBonus;
        if (roll < cumulative) {
          const exists = myAuras.find(a => a.name === aura.name);
          if (exists) {
            result.innerHTML = `âš ï¸ <b style="color:${aura.color}">${aura.name}</b> ì´ë¯¸ ë³´ìœ  ì¤‘ì´ë¼ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`;
            return;
          }
          myAuras.push(aura);
          result.innerHTML = `ğŸŒˆ <b style="color:${aura.color}">${aura.name}</b> (${aura.rarity}) ë‹¹ì²¨!`;
          updateStorage();
          if (aura.cutscene || aura.chance <= 10) showCutscene(aura.name);
          return;
        }
      }
    }

    function drawAura10() {
      luckBonus += 0.5;
      for (let i = 0; i < 10; i++) {
        setTimeout(() => drawAura(), i * 200);
      }
      setTimeout(() => luckBonus = 0, 3000);
    }

    function updateStorage() {
      if (myAuras.length === 0) {
        storage.textContent = "ì—†ìŒ";
        return;
      }
      const rarityOrder = ["ì‹ í™”", "ì´ˆì›”", "ì „ì„¤", "ì—í”½", "í¬ê·€", "ì¼ë°˜"];
      myAuras.sort((a, b) => rarityOrder.indexOf(a.rarity) - rarityOrder.indexOf(b.rarity));
      storage.innerHTML = myAuras.map(a => `<span class="aura-item" style="color:${a.color}" onclick="equipAura('${a.name}')">${a.name}</span>`).join(', ');
    }

    function equipAura(name) {
      if (equipped === name) {
        equipped = null;
        equippedAura.textContent = 'ğŸ§¿ ì°©ìš© ì¤‘ì¸ ì•„ìš°ë¼: ì—†ìŒ';
        auraEffect.style.backgroundImage = '';
        return;
      }
      const aura = myAuras.find(a => a.name === name);
      if (aura) {
        equipped = name;
        equippedAura.textContent = `ğŸ§¿ ì°©ìš© ì¤‘ì¸ ì•„ìš°ë¼: ${aura.name}`;
        auraEffect.style.backgroundImage = `url('https://twemoji.maxcdn.com/v/latest/svg/${aura.effect.codePointAt(0).toString(16)}.svg')`;
      }
    }

    function showCutscene(name) {
      cutscene.textContent = `âœ¨ ${name} íšë“!! âœ¨`;
      cutscene.style.display = 'flex';
      setTimeout(() => { cutscene.style.display = 'none'; }, 2500);
    }

    function toggleAuto() {
      auto = !auto;
      document.getElementById('autoState').textContent = auto ? 'ON' : 'OFF';
      if (auto) {
        autoInterval = setInterval(drawAura, 1000);
      } else {
        clearInterval(autoInterval);
      }
    }
  </script>
</body>
</html>
