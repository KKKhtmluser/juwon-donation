<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>주원의 마음 RNG 기부게임</title>
  <style>
    * { box-sizing: border-box; }
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 30px;
    }

    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      color: #ffd700;
      text-shadow: 2px 2px #000;
    }

    .section { margin: 40px 0; }

    button {
      padding: 12px 24px;
      margin: 5px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
      transition: transform 0.2s, background-color 0.3s;
    }
    button:hover {
      transform: scale(1.05);
    }
    .donate { background-color: #ffcc00; color: black; }
    .gacha { background-color: #7b68ee; color: white; }
    .auto { background-color: #444; color: white; }

    .aura-box {
      margin-top: 15px;
      font-size: 20px;
      min-height: 30px;
      animation: popUp 0.5s ease;
    }
    @keyframes popUp {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .cutscene {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: radial-gradient(circle, rgba(255,255,255,0.1), rgba(0,0,0,0.9));
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      z-index: 9999;
      display: none;
      animation: flashIn 0.8s ease;
    }
    @keyframes flashIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .storage {
      margin-top: 30px;
      padding: 15px;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }
    .storage h3 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>🌟 주원의 RNG 기부게임 🌟</h1>

  <div class="section">
    <button class="donate" onclick="donate()">기부하기 +1원</button>
    <div>총 기부 금액: <span id="money">0</span>원</div>
  </div>

  <div class="section">
    <button class="gacha" onclick="drawAura()">🎲 아우라 뽑기</button>
    <button class="gacha" onclick="drawAura10()">🔁 10회 뽑기</button>
    <button class="auto" onclick="toggleAuto()">⚙️ 자동 뽑기: <span id="autoState">OFF</span></button>
    <div class="aura-box" id="auraResult"></div>
  </div>

  <div class="storage">
    <h3>📦 내 아우라 보관함</h3>
    <div id="auraStorage">없음</div>
  </div>

  <div class="cutscene" id="cutscene">✨ 전설 아우라 획득!! ✨</div>

  <script>
    let money = 0;
    let auto = false;
    let autoInterval;
    let luckBonus = 0;
    const result = document.getElementById('auraResult');
    const storage = document.getElementById('auraStorage');
    const cutscene = document.getElementById('cutscene');

    const auras = [
      { name: "흐릿한 아우라", rarity: "일반", chance: 50, color: "gray" },
      { name: "반짝이는 아우라", rarity: "일반", chance: 20, color: "silver" },
      { name: "불꽃 아우라", rarity: "희귀", chance: 10, color: "orange", cutscene: true },
      { name: "얼음 아우라", rarity: "희귀", chance: 7, color: "skyblue", cutscene: true },
      { name: "천둥 아우라", rarity: "에픽", chance: 5, color: "violet", cutscene: true },
      { name: "별빛 아우라", rarity: "전설", chance: 3, color: "gold", cutscene: true },
      { name: "무한 아우라", rarity: "초월", chance: 0.8, color: "deepskyblue", cutscene: true },
      { name: "창조신의 아우라", rarity: "신화", chance: 0.2, color: "white", cutscene: true },
    ];

    let myAuras = [];

    function donate() {
      money++;
      document.getElementById('money').textContent = money;
    }

    function drawAura() {
      const roll = Math.random() * 100;
      let cumulative = 0;
      for (const aura of auras) {
        cumulative += aura.chance + luckBonus;
        if (roll < cumulative) {
          const exists = myAuras.find(a => a.name === aura.name);
          if (exists) {
            result.innerHTML = `⚠️ <b style="color:${aura.color}">${aura.name}</b> 이미 보유 중이라 삭제되었습니다.`;
            return;
          }
          myAuras.push(aura);
          result.innerHTML = `🌈 <b style="color:${aura.color}">${aura.name}</b> (${aura.rarity}) 당첨!`;
          updateStorage();
          if (aura.cutscene || aura.chance <= 10) showCutscene(aura.name);
          return;
        }
      }
    }

    function drawAura10() {
      luckBonus += 0.5;
      for (let i = 0; i < 10; i++) {
        setTimeout(() => drawAura(), i * 200);
      }
      setTimeout(() => luckBonus = 0, 3000);
    }

    function updateStorage() {
      if (myAuras.length === 0) {
        storage.textContent = "없음";
        return;
      }
      const rarityOrder = ["신화", "초월", "전설", "에픽", "희귀", "일반"];
      myAuras.sort((a, b) => rarityOrder.indexOf(a.rarity) - rarityOrder.indexOf(b.rarity));
      storage.innerHTML = myAuras.map(a => `<span style="color:${a.color}">${a.name}</span>`).join(', ');
    }

    function showCutscene(name) {
      cutscene.textContent = `✨ ${name} 획득!! ✨`;
      cutscene.style.display = 'flex';
      setTimeout(() => { cutscene.style.display = 'none'; }, 2500);
    }

    function toggleAuto() {
      auto = !auto;
      document.getElementById('autoState').textContent = auto ? 'ON' : 'OFF';
      if (auto) {
        autoInterval = setInterval(drawAura, 1000);
      } else {
        clearInterval(autoInterval);
      }
    }
  </script>
</body>
</html>
